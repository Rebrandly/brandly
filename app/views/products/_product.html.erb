      <div class="product">
        <div class="product-image-container">
          <%= image_tag product.try(:product_variations).first.try(:product_images).first.try(:filepath), class: 'product-image' %>
          <%= link_to product_path(product), :class => 'product-overlay' do %>
            <div class="card-hover">
              View Product
            </div>
          <% end %>
            <div class="product-meta">
              <span class="product-country-heading product-meta-item" style="color:#fff;"><svg class="product-country-icon nc-icon outline" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 24 24"> <g transform="translate(0, 0)"> <path fill="none" stroke="#fff" stroke-width="2" stroke-linecap="square" stroke-miterlimit="10" d="M20,9c0,4.9-8,13-8,13 S4,13.9,4,9c0-5.1,4.1-8,8-8S20,3.9,20,9z" stroke-linejoin="miter"></path> <circle data-color="color-2" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="square" stroke-miterlimit="10" cx="12" cy="9" r="3" stroke-linejoin="miter"></circle> </g> </svg>United States</span>
            </div>
          <div class="liked-users" id="liked-users-<%=product.id %>">
            <% product.liked_by.limit(5).each do |user| %>
              <%= link_to user_path(user.try(:username)) do %>
                <a href="<%= user_path(user.username) %>" class="product-user-image" data-container="body" data-toggle="popover" data-placement="bottom" data-content='<a href="<%= user_path(user.username) %>"><%= image_tag user.try(:avatar).url(:thumb), class: "popover-user-image" %></a><h5 class="popover-username"><%= user.username %></h5><a href="<%= user_path(user.username) %>" class="btn-popover">View profile</a>'>
                <%= image_tag user.try(:avatar).url(:thumb), class: 'liked-user-image' %>
                </a>
              <% end %>
            <% end %>
          </div>
          <div class="social">
            <span id="product-<%= product.id %>" class="vote">
              <% if product.liked_by.include?(current_user) %>
                <%= render :partial => "products/downvote", locals: { product: product }%>
              <% else %>
              <%= render :partial => "products/upvote", locals: { product: product } %>
              <% end %>
            </span>
          </div>
        </div>
        <div class="product-details">
            <h5 class="product-heading"><%= truncate(product.title, length: 20) %></h5>
            <span class="product-retailer-heading" style="display:block;"><%= link_to product.try(:retailer).name, retailer_path(product.retailer) %></span>
            <div class="product-meta">
              <span class="product-meta-item"><svg class="product-downvote-icon nc-icon glyph" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 24 24"><g> <path fill="#d94052" d="M17,0c-1.9,0-3.7,0.8-5,2.1C10.7,0.8,8.9,0,7,0C3.1,0,0,3.1,0,7c0,6.4,10.9,15.4,11.4,15.8 c0.2,0.2,0.4,0.2,0.6,0.2s0.4-0.1,0.6-0.2C13.1,22.4,24,13.4,24,7C24,3.1,20.9,0,17,0z"></path></g></svg><%= product.liked_by_count %></span>
              <span class="product-meta-item"><svg class="nc-icon outline" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 24 24"><g transform="translate(0, 0)"> <path fill="none" stroke="#656565" stroke-width="2" stroke-linecap="square" stroke-miterlimit="10" d="M2,12c0,0,4-6,10-6 c6,0,10,6,10,6s-4,6-10,6C6,18,2,12,2,12z" stroke-linejoin="miter"></path> <circle fill="none" stroke="#656565" stroke-width="2" stroke-linecap="square" stroke-miterlimit="10" cx="12" cy="10" r="4" stroke-linejoin="miter"></circle> </g></svg><%= product.viewed_count %></span>
              <span class="product-price"><%= number_to_currency(product.original_price) %></<span>
            </div>
        </div>
      </div>
