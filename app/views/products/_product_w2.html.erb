<div class="product-container col-sm-6 col-md-4 animated fadeIn">
    <div class="product">
      <div class="product-image">
        <%= image_tag product.image %>
        <%= link_to "", product_path(product), {:class => 'product-overlay cd-btn'} %>
        <div class="card-hover">
          <h5 class="product-heading"><%= product.title %></h5>
          <span class="retailer"><%= link_to product.shop.name, shop_path(product.shop) %></span>
        </div>
      </div>
      <div class="product-details">
        <div class="social">
          <%= product.liked_by_count %>
          <span id="product-<%= product.id %>" class="vote">
            <% if product.liked_by.include?(current_user) %>
              <%= render :partial => "products/downvote", locals: { product: product }%>
            <% else %>
            <%= render :partial => "products/upvote", locals: { product: product } %>
            <% end %>
          </span>
          <span class="upvotes" id="upvotes-<%=product.id %>">
          <% product.liked_by.limit(5).each do |user| %>
            <%= link_to user_path(user.try(:username)) do %>
              <%= image_tag user.try(:avatar).url(:thumb) %>
            <% end %>
          <% end %>
          </span>
        </div>
      </div>
    </div>
  </div>
